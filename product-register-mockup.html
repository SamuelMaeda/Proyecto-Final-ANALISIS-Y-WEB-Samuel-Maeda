<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Registro de Libros — Mockup</title>
<style>
  :root{
    --bg:#f4f6f8;
    --card:#ffffff;
    --accent:#0d6efd;
    --success:#198754;
    --danger:#dc3545;
    --muted:#6c757d;
    --shadow: 0 6px 18px rgba(16,24,40,.08);
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  body{background:var(--bg); margin:0; padding:32px; display:flex; align-items:flex-start; justify-content:center; min-height:100vh;}
  .container{width:100%; max-width:840px;}
  .card{background:var(--card); border-radius:12px; box-shadow:var(--shadow); padding:22px;}
  h1{margin:0 0 8px; font-size:22px;}
  p.lead{color:var(--muted); margin:0 0 18px;}
  form .row{display:flex; gap:12px; margin-bottom:12px;}
  .col{flex:1; min-width:0;}
  label{display:block; font-size:13px; color:#222; margin-bottom:6px;}
  input, select, textarea{
    width:100%; padding:10px 12px; border-radius:8px; border:1px solid #e6e9ee; font-size:14px;
    outline:none; box-sizing:border-box;
  }
  input:focus, select:focus, textarea:focus{box-shadow:0 0 0 4px rgba(13,110,253,0.08); border-color:var(--accent);}
  .error-text{color:var(--danger); font-size:13px; margin-top:6px; display:none;}
  .actions{display:flex; gap:12px; align-items:center; margin-top:8px;}
  button{padding:10px 16px; border-radius:8px; border:0; cursor:pointer; font-weight:600;}
  .btn-primary{background:var(--accent); color:white;}
  .btn-secondary{background:#e9ecef; color:#111;}
  .alert{padding:10px 14px; border-radius:8px; margin-bottom:12px; display:none;}
  .alert.success{background:rgba(25,135,84,0.12); color:var(--success); border:1px solid rgba(25,135,84,0.18);}
  .alert.error{background:rgba(220,53,69,0.08); color:var(--danger); border:1px solid rgba(220,53,69,0.12);}
  table{width:100%; border-collapse:collapse; font-size:14px;}
  th,td{padding:8px 10px; text-align:left; border-bottom:1px solid #f1f3f5;}
  th{color:var(--muted); font-weight:600; font-size:13px;}
  @media (max-width:640px){ .row{flex-direction:column;} .actions{flex-direction:column; align-items:stretch;} }
</style>
</head>
<body>
  <div class="container">
    <div class="card" role="main" aria-labelledby="title">
      <h1 id="title">Registrar Libro</h1>
      <p class="lead">Ingrese los datos del libro. Los campos marcados con * son obligatorios.</p>

      <div id="alert" class="alert" role="status" aria-live="polite"></div>

      <form id="form">
        <div class="row">
          <div class="col">
            <label for="titulo">Título *</label>
            <input id="titulo" name="titulo" type="text" />
            <div id="err-titulo" class="error-text">El título es obligatorio.</div>
          </div>
          <div class="col">
            <label for="autor">Autor *</label>
            <input id="autor" name="autor" type="text" />
            <div id="err-autor" class="error-text">El autor es obligatorio.</div>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <label for="categoria">Categoría *</label>
            <select id="categoria" name="categoria">
              <option value="">-- Seleccionar --</option>
              <option>Novela</option>
              <option>Infantil</option>
              <option>Educativo</option>
              <option>Ciencia</option>
              <option>Otros</option>
            </select>
            <div id="err-categoria" class="error-text">Selecciona una categoría.</div>
          </div>
          <div class="col">
            <label for="precio">Precio (Q) *</label>
            <input id="precio" name="precio" type="number" step="0.01" min="0" />
            <div id="err-precio" class="error-text">Precio inválido.</div>
          </div>
          <div class="col">
            <label for="cantidad">Cantidad *</label>
            <input id="cantidad" name="cantidad" type="number" min="0" step="1" />
            <div id="err-cantidad" class="error-text">Cantidad inválida.</div>
          </div>
        </div>

        <div>
          <label for="descripcion">Descripción</label>
          <textarea id="descripcion" name="descripcion" rows="3" placeholder="Ejemplo: edición 2024, pasta dura, 350 páginas..."></textarea>
        </div>

        <div class="actions">
          <button type="submit" class="btn-primary">Guardar libro</button>
          <button type="button" id="btn-clear" class="btn-secondary">Limpiar</button>
        </div>
      </form>

      <div class="preview">
        <h3 style="margin:14px 0 8px;">Últimos libros (vista previa)</h3>
        <table>
          <thead><tr><th>Título</th><th>Autor</th><th>Categoría</th><th>Precio (Q)</th><th>Cantidad</th></tr></thead>
          <tbody id="preview-body">
            <tr><td colspan="5">No hay libros aún.</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

<script>
  const form = document.getElementById('form');
  const alertBox = document.getElementById('alert');
  const previewBody = document.getElementById('preview-body');

  function showAlert(type, text){
    alertBox.className = 'alert ' + (type === 'success' ? 'success' : 'error');
    alertBox.textContent = text;
    alertBox.style.display = 'block';
    setTimeout(()=> alertBox.style.display = 'none', 4000);
  }

  function clearErrors(){
    document.querySelectorAll('.error-text').forEach(e => e.style.display = 'none');
  }

  function validate(){
    clearErrors();
    let ok = true;
    const titulo = document.getElementById('titulo').value.trim();
    const autor = document.getElementById('autor').value.trim();
    const categoria = document.getElementById('categoria').value;
    const precio = parseFloat(document.getElementById('precio').value);
    const cantidad = parseInt(document.getElementById('cantidad').value, 10);

    if(!titulo){ document.getElementById('err-titulo').style.display='block'; ok=false; }
    if(!autor){ document.getElementById('err-autor').style.display='block'; ok=false; }
    if(!categoria){ document.getElementById('err-categoria').style.display='block'; ok=false; }
    if(Number.isNaN(precio) || precio < 0){ document.getElementById('err-precio').style.display='block'; ok=false; }
    if(Number.isNaN(cantidad) || cantidad < 0){ document.getElementById('err-cantidad').style.display='block'; ok=false; }

    return ok;
  }

  function addPreviewRow(libro){
    if(previewBody.children.length === 1){
      previewBody.innerHTML = '';
    }
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${escapeHtml(libro.titulo)}</td>
                    <td>${escapeHtml(libro.autor)}</td>
                    <td>${escapeHtml(libro.categoria)}</td>
                    <td>${Number(libro.precio).toFixed(2)}</td>
                    <td>${escapeHtml(String(libro.cantidad))}</td>`;
    previewBody.prepend(tr);
  }

  function escapeHtml(s){ return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

  form.addEventListener('submit', function(e){
    e.preventDefault();
    if(!validate()) { showAlert('error','Corrige los errores antes de continuar.'); return; }

    const libro = {
      titulo: document.getElementById('titulo').value.trim(),
      autor: document.getElementById('autor').value.trim(),
      categoria: document.getElementById('categoria').value,
      precio: parseFloat(document.getElementById('precio').value),
      cantidad: parseInt(document.getElementById('cantidad').value, 10),
      descripcion: document.getElementById('descripcion').value.trim()
    };

    addPreviewRow(libro);
    showAlert('success', '✅ Libro registrado correctamente.');
    form.reset();
  });

  document.getElementById('btn-clear').addEventListener('click', ()=> { form.reset(); clearErrors(); });

</script>
</body>
</html>
